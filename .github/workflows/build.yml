name: Build

on:
  workflow_dispatch:
    
jobs:
  build:
    defaults:
      run:
        shell: bash
    
    strategy:
      matrix:
        include:
          - { result: Linux, runs-on: ubuntu-22.04 }
          - { result: Windows, runs-on: windows-2022 }
    
    runs-on: ${{ matrix.runs-on }}
    
    steps:
      - name: Checkout latest
        uses: actions/checkout@v5
        with:
          submodules: 'recursive'

      - name: Create Executable
        uses: sayyid5416/pyinstaller@v1
        with:
          spec: 'BabbleTrainer.spec'
          python_ver: '3.12.8'
          requirements: 'requirements.txt'
          upload_exe_with_name: ${{ matrix.result }}